(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{586:function(t,e,a){"use strict";a.r(e);a(34),a(17),a(16),a(18),a(6),a(24),a(19),a(25);var n=a(4),r=a(3),s=(a(22),a(81));function o(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}var i={data:function(){return{fields:["ID","Name","ExternalID"],menu:!1,companyname:"",save:!1,input:!1,isadmin:!1,company:{name:null,externalId:null}}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?o(Object(a),!0).forEach((function(e){Object(r.a)(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(s.c)({companies:"companies"})),watch:{companyname:function(t){t.length>2?this.save=!0:this.save=!1}},created:function(){var t=localStorage.getItem("userId");this.fetchuseraccount(t),this.$store.dispatch("_fetchcompanies")},methods:{savecompany:function(){var t=this;this.$store.dispatch("_registercompany",this.company).then((function(){t.company=null,t.save=!1,t.input=!1}))},fetchuseraccount:function(t){var e=this;return Object(n.a)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.$api.$get("/users/".concat(t)).then((function(t){e.isadmin="ADMIN"===t.role,e.meter.companyId=t.companyId})).catch((function(t){}));case 2:case"end":return a.stop()}}),a)})))()}}},c=i,p=a(58),l=Object(p.a)(c,(function(){var t=this,e=t._self._c;return t.companies?e("div",{staticClass:"container min-w-full"},[e("div",{staticClass:"p-5 border-b flex flex-row justify-between"},[t._m(0),t._v(" "),t.isadmin?e("div",{staticClass:"flex justify-end"},[e("form",[e("div",{staticClass:"inline-flex justify-between gap-4 py-4"},[t.save?e("input",{directives:[{name:"model",rawName:"v-model",value:t.company.name,expression:"company.name"}],staticClass:"rounded-lg border border-indigo-400 min-w-64 placeholder:text-gray-400 p-2",attrs:{placeholder:"Company Name",required:""},domProps:{value:t.company.name},on:{input:function(e){e.target.composing||t.$set(t.company,"name",e.target.value)}}}):t._e(),t._v(" "),t.save?e("input",{directives:[{name:"model",rawName:"v-model",value:t.company.externalId,expression:"company.externalId"}],staticClass:"rounded-lg border border-indigo-400 min-w-64 placeholder:text-gray-400 p-2",attrs:{placeholder:"External ID",required:""},domProps:{value:t.company.externalId},on:{input:function(e){e.target.composing||t.$set(t.company,"externalId",e.target.value)}}}):t._e(),t._v(" "),e("div",[t.save?e("button",{staticClass:"bg-primary font-bold text-white p-2 px-3 rounded-lg border border-primary",attrs:{type:"submit"},on:{click:t.savecompany}},[t._v("\n              Save Company\n            ")]):e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.save=!t.save}}},[t._v("\n              + New Company\n            ")]),t._v(" "),e("export-button",{attrs:{report:"companies"}})],1)])])]):t._e()]),t._v(" "),e("table",{staticClass:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},[e("thead",{staticClass:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-900"},[e("tr",[t._l(t.fields,(function(a,n){return e("th",{key:n,staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("\n          "+t._s(a)+"\n        ")])})),t._v(" "),t._m(1)],2)]),t._v(" "),e("tbody",t._l(t.companies,(function(a,n){return e("tr",{key:n,staticClass:"odd:bg-gray-50 bg-white border-b hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700"},[e("th",{staticClass:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",attrs:{scop:"row"}},[t._v("\n          "+t._s(a.id)+"\n        ")]),t._v(" "),e("td",{staticClass:"py-4 px-6"},[t._v("\n          "+t._s(a.name)+"\n        ")]),t._v(" "),e("td",{staticClass:"py-4 px-6"},[t._v("\n          "+t._s(a.externalId)+"\n        ")]),t._v(" "),t._m(2,!0)])})),0)])]):t._e()}),[function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"font-bold text-primary text-3xl"},[t._v("\n        Companies\n      ")]),t._v(" "),e("p",{staticClass:"text-sm font-light"},[t._v("\n        List of all registered companies\n      ")])])},function(){var t=this._self._c;return t("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t("span",{staticClass:"sr-only"},[this._v("Edit")])])},function(){var t=this._self._c;return t("td",{staticClass:"py-4 px-6 text-right"},[t("a",{staticClass:"font-medium text-blue-600 dark:text-blue-500 hover:underline",attrs:{href:"#"}},[this._v("Edit")])])}],!1,null,null,null);e.default=l.exports}}]);