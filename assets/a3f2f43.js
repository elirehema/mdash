(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{330:function(t,e,n){"use strict";n.r(e);n(31),n(38),n(29),n(33),n(11),n(53),n(34),n(54);var r=n(2),o=n(15),c=(n(10),n(44));function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var d={data:function(){return{fields:["ID","Name","ExternalID"],menu:!1,companyname:"",save:!1,input:!1,isadmin:!1,company:{name:null,externalId:null}}},computed:function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},Object(c.b)({companies:"companies"})),watch:{companyname:function(t){t.length>2?this.save=!0:this.save=!1}},created:function(){var t=localStorage.getItem("userId");this.fetchuseraccount(t),this.$store.dispatch("_fetchcompanies")},methods:{savecompany:function(){var t=this;this.$store.dispatch("_registercompany",this.company).then((function(){t.company=null,t.save=!1,t.input=!1}))},fetchuseraccount:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.$api.$get("/users/".concat(t)).then((function(t){e.isadmin="ADMIN"===t.role,e.meter.companyId=t.companyId})).catch((function(t){}));case 2:case"end":return n.stop()}}),n)})))()}}},m=d,v=n(37),component=Object(v.a)(m,(function(){var t=this,e=t._self._c;return t.companies?e("div",{staticClass:"container min-w-full"},[e("div",{staticClass:"p-5 border-b flex flex-row justify-between"},[t._m(0),t._v(" "),t.isadmin?e("div",{staticClass:"flex justify-end"},[e("form",[e("div",{staticClass:"inline-flex justify-between gap-4 py-4"},[t.save?e("input",{directives:[{name:"model",rawName:"v-model",value:t.company.name,expression:"company.name"}],staticClass:"rounded-lg border border-indigo-400 min-w-64 placeholder:text-gray-400 p-2",attrs:{placeholder:"Company Name",required:""},domProps:{value:t.company.name},on:{input:function(e){e.target.composing||t.$set(t.company,"name",e.target.value)}}}):t._e(),t._v(" "),t.save?e("input",{directives:[{name:"model",rawName:"v-model",value:t.company.externalId,expression:"company.externalId"}],staticClass:"rounded-lg border border-indigo-400 min-w-64 placeholder:text-gray-400 p-2",attrs:{placeholder:"External ID",required:""},domProps:{value:t.company.externalId},on:{input:function(e){e.target.composing||t.$set(t.company,"externalId",e.target.value)}}}):t._e(),t._v(" "),e("div",[t.save?e("button",{staticClass:"bg-primary font-bold text-white p-2 px-3 rounded-lg border border-primary",attrs:{type:"submit"},on:{click:t.savecompany}},[t._v("\n              Save Company\n            ")]):e("button",{staticClass:"button",attrs:{type:"button"},on:{click:function(e){t.save=!t.save}}},[t._v("\n              + New Company\n            ")]),t._v(" "),e("export-button",{attrs:{report:"companies"}})],1)])])]):t._e()]),t._v(" "),e("table",{staticClass:"w-full text-sm text-left text-gray-500 dark:text-gray-400"},[e("thead",{staticClass:"text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-900"},[e("tr",[t._l(t.fields,(function(n,i){return e("th",{key:i,staticClass:"py-3 px-6",attrs:{scope:"col"}},[t._v("\n          "+t._s(n)+"\n        ")])})),t._v(" "),t._m(1)],2)]),t._v(" "),e("tbody",t._l(t.companies,(function(n,i){return e("tr",{key:i,staticClass:"odd:bg-gray-50 bg-white border-b hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700"},[e("th",{staticClass:"py-4 px-6 font-medium text-gray-900 whitespace-nowrap dark:text-white",attrs:{scop:"row"}},[t._v("\n          "+t._s(n.id)+"\n        ")]),t._v(" "),e("td",{staticClass:"py-4 px-6"},[t._v("\n          "+t._s(n.name)+"\n        ")]),t._v(" "),e("td",{staticClass:"py-4 px-6"},[t._v("\n          "+t._s(n.externalId)+"\n        ")]),t._v(" "),t._m(2,!0)])})),0)])]):t._e()}),[function(){var t=this,e=t._self._c;return e("div",[e("p",{staticClass:"font-bold text-primary text-3xl"},[t._v("\n        Companies\n      ")]),t._v(" "),e("p",{staticClass:"text-sm font-light"},[t._v("\n        List of all registered companies\n      ")])])},function(){var t=this._self._c;return t("th",{staticClass:"py-3 px-6",attrs:{scope:"col"}},[t("span",{staticClass:"sr-only"},[this._v("Edit")])])},function(){var t=this._self._c;return t("td",{staticClass:"py-4 px-6 text-right"},[t("a",{staticClass:"font-medium text-blue-600 dark:text-blue-500 hover:underline",attrs:{href:"#"}},[this._v("Edit")])])}],!1,null,null,null);e.default=component.exports}}]);