(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{590:function(e,t,a){"use strict";a.r(t);var r=a(455),i=a(584),s=a(438),n=a(466),l=a(463),o=a(495),d=a(456),c=a(585),u=a(612),m=a(577),f=a(437),p=a(510),v=a(451),b=a(518),h=a(63),I=a(457),_=(a(17),a(16),a(18),a(6),a(24),a(19),a(25),a(3)),g=(a(66),a(81));function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){Object(_.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var y={data:function(){return{dialog:!1,dialogDelete:!1,editedIndex:-1,valid:!0,rules:{required:function(e){return!!e||"Field Required"}},editedItem:{id:0,batchNumber:"",manufacturer:"",serialNumber:"",deviceId:"",controlNumber:"",companyId:0,initialCredits:0,initialOffsets:0},defaultItem:{id:0,batchNumber:"",manufacturer:"",serialNumber:"",deviceId:"",controlNumber:"",companyId:0,initialCredits:0,initialOffsets:0},headers:[{text:"Device ID",value:"deviceId"},{text:"Credits",value:"bill.credits"},{text:"Off-Set",value:"bill.offSet"},{text:"Control No.",value:"controlNumber"},{text:"Manufacturer",value:"manufacturer"},{text:"Status",value:"status"},{text:"Last Updated",value:"updated"},{text:"Action",value:"actions"}]}},computed:x(x({},Object(g.c)({meters:"meters",companies:"companies"})),{},{formTitle:function(){return-1===this.editedIndex?"Create new meter":"Edit meter"}}),watch:{dialog:function(e){e||this.close()},dialogDelete:function(e){e||this.closeDelete()}},created:function(){this.$store.dispatch("_fetchmeters")},methods:{handleRowClick:function(e){this.$router.push({path:"meters/".concat(e.id)})},editItem:function(e){this.editedIndex=this.meters.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},close:function(){var e=this;this.dialog=!1,this.$nextTick((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1})),setTimeout(this.$store.dispatch("_fetchmeters"),5e3)},save:function(){this.$refs.form.validate()&&(this.editedIndex>-1?this.$store.dispatch("_updatemeter",{id:this.editedItem.id,payload:this.editedItem}):this.$store.dispatch("_addnewmeter",this.editedItem),this.close())}}},O=a(58),w=Object(O.a)(y,(function(){var e=this,t=e._self._c;return e.meters?t(c.a,{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.meters,"items-per-page":15,"server-items-length":e.pages},on:{"click:row":e.handleRowClick,"update:items-per-page":function(t){return e.$emit("paginate",t)},"update:options":function(t){return e.$emit("paginate",t)}},scopedSlots:e._u([{key:"top",fn:function(){return[t(h.a,{attrs:{flat:""}},[t(I.a,{staticClass:"font-weight-bold"},[e._v("\n        Meters\n      ")]),e._v(" "),t(v.a),e._v(" "),t(u.a,{attrs:{"max-width":"60%"},scopedSlots:e._u([{key:"activator",fn:function(a){var r=a.on,i=a.attrs;return[t(s.a,e._g(e._b({staticClass:"mb-2",attrs:{color:"primary",dark:""}},"v-btn",i,!1),r),[t(f.a,{attrs:{left:""}},[e._v("\n              mdi-plus\n            ")]),e._v("\n            New Meter\n          ")],1)]}}],null,!1,2757874299),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[e._v(" "),t(n.a,[t(r.a,{attrs:{color:"primary",dark:"",flat:""}},[t("span",{staticClass:"text-h5 font-weight-bold"},[e._v(e._s(e.formTitle))])]),e._v(" "),t(l.b,[t(m.a,{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(d.a,[t(p.a,[t(o.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(b.a,{attrs:{filled:"",rules:[e.rules.required],label:"Batch Number"},model:{value:e.editedItem.batchNumber,callback:function(t){e.$set(e.editedItem,"batchNumber",t)},expression:"editedItem.batchNumber"}})],1),e._v(" "),t(o.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(b.a,{attrs:{rules:[e.rules.required],label:"Device Manufacture"},model:{value:e.editedItem.manufacturer,callback:function(t){e.$set(e.editedItem,"manufacturer",t)},expression:"editedItem.manufacturer"}})],1),e._v(" "),t(o.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(b.a,{attrs:{filled:"",rules:[e.rules.required],label:"Device Serial Number"},model:{value:e.editedItem.serialNumber,callback:function(t){e.$set(e.editedItem,"serialNumber",t)},expression:"editedItem.serialNumber"}})],1),e._v(" "),t(o.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(b.a,{attrs:{rules:[e.rules.required],label:"Device ID"},model:{value:e.editedItem.deviceId,callback:function(t){e.$set(e.editedItem,"deviceId",t)},expression:"editedItem.deviceId"}})],1),e._v(" "),t(o.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(b.a,{attrs:{rules:[e.rules.required],label:"Control Number"},model:{value:e.editedItem.controlNumber,callback:function(t){e.$set(e.editedItem,"controlNumber",t)},expression:"editedItem.controlNumber"}})],1),e._v(" "),t(o.a,{attrs:{cols:"12",sm:"6",md:"4"}},[t(i.a,{attrs:{items:e.companies,"item-text":"name","item-value":"id",label:"Select Company",rules:[e.rules.required],name:"editedItem.companyId","persistent-hint":"","single-line":""},on:{focus:function(t){return e.$store.dispatch("_fetchcompanies")}},model:{value:e.editedItem.companyId,callback:function(t){e.$set(e.editedItem,"companyId",t)},expression:"editedItem.companyId"}})],1)],1)],1)],1)],1),e._v(" "),t(l.a,[t(v.a),e._v(" "),t(s.a,{attrs:{color:"primary darken-1",small:""},on:{click:e.close}},[e._v("\n              Cancel\n            ")]),e._v(" "),t(s.a,{attrs:{color:"warning darken-1",small:""},on:{click:e.save}},[e._v("\n              Save\n            ")])],1)],1)],1),e._v(" "),t("export-button",{attrs:{report:"meters"}})],1)]},proxy:!0},{key:"item.status",fn:function(a){return[a.item.isValveClosed?t(f.a,{attrs:{small:"",color:"red"}},[e._v("\n      mdi-water-off\n    ")]):t(f.a,{attrs:{small:"",color:"blue"}},[e._v("\n      mdi-water-check\n    ")])]}},{key:"item.actions",fn:function(a){var r=a.item;return[t(d.a,{staticClass:"ma-0 pa-0",on:{click:function(e){e.stopPropagation()}}},[t(f.a,{staticClass:"mr-2",attrs:{small:""},on:{click:function(t){return e.editItem(r)}}},[e._v("\n        mdi-pencil\n      ")])],1)]}},{key:"item.updated",fn:function(a){var r=a.item;return[t("span",[e._v(e._s(e._f("dateformat")(r.updatedAt)))])]}}],null,!1,3456530247)}):t("skeleton-table-loader")}),[],!1,null,null,null);t.default=w.exports}}]);